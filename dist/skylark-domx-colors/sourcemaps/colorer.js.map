{"version":3,"sources":["colorer.js"],"names":["define","langx","$","colors","ColorBox","ColorPane","replaceInput","join","markup","colorer","elmInput","options","theme","mixin","color","flat","appendTo","maxSelectionSize","preferredFormat","containerClassName","replacerClassName","offset","$el","$pane","ownerDocument","addClass","isInput","is","shouldReplace","attr","this","_shouldReplace","$replacer","className","val","after","hide","toggleClass","pane","show","$appendTo","parent","length","append"],"mappings":";;;;;;;AAAAA,QACI,sBACA,qBACH,WACA,aACA,eACC,SAASC,EAAMC,EAAEC,EAAOC,EAASC,GAChC,IACCC,GACI,4BACI,qEACA,mCACJ,UACFC,KAAK,IAEPC,GAEQ,uCACI,qCACI,gDACA,kDACI,4DACJ,SACJ,SACA,oCACI,6BACI,8BACA,6BACI,yBACI,uBACI,uBACI,iCACJ,SACJ,SACJ,SACA,0CACA,SACA,uBACI,gCACJ,SACJ,SACA,oGACJ,SACA,yCACI,6DACJ,SACA,gDACA,0CACI,qCACA,oDACJ,SACJ,SACJ,UACFD,KAAK,IAiEd,OAAOJ,EAAOM,QA7Dd,SAAiBC,EAASC,GAezB,IACCC,GAfDD,EAAUV,EAAMY,OAENC,OAAO,EACPC,MAAM,EACNC,SAAU,OACVC,iBAAkB,EAClBC,iBAAiB,EACjBC,mBAAoB,GACpBC,kBAAmB,GACnBR,MAAO,WAEPS,OAAQ,MAChBV,IAGeC,MAChBG,EAAOJ,EAAQI,KACfC,EAAWL,EAAQK,SACnBM,EAAMpB,EAAEQ,GACRa,EAAQrB,EAAEM,EAAOE,EAASc,eAAeC,SAASb,GAC5Cc,EAAUJ,EAAIK,GAAG,SAEjBC,GADmBF,GAAWJ,EAAIO,KAAK,QACvBC,KAAKC,eAAkBL,IAAYX,GACnDiB,EAAa,EAAkB9B,EAAEI,GAAcmB,SAASb,GACTa,SAASd,EAAQsB,WACjBR,SAASd,EAAQS,mBACjClB,MAiBhC,UAbOS,EAAQI,YACRJ,EAAQK,SAEfL,EAAQG,MAAQH,EAAQG,OAAUY,GAAWJ,EAAIY,MAE7CN,GACAN,EAAIa,MAAMH,GAAWI,OAIzBb,EAAMc,YAAY,UAAWtB,GACvBU,SAASd,EAAQQ,oBAEnBJ,EAAM,CACNO,EAAIa,MAAMZ,GAAOa,OACjB,IAAIE,EAAO,IAAIjC,EAAUkB,EAAM,GAAGZ,GAElC,OADA2B,EAAKC,OACED,EAEP,IAAIE,EAAyB,WAAbxB,EAAwBM,EAAImB,SAAWvC,EAAEc,GAOzD,OANyB,IAArBwB,EAAUE,SACVF,EAAYtC,EAAE,SAGlBsC,EAAUG,OAAOpB,GACjBZ,EAAQ2B,KAAOf,EACR,IAAInB,EAAS4B,EAAU,GAAGrB","file":"../colorer.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-query\",\r\n\t\"./colors\",\r\n\t\"./ColorBox\",\r\n\t\"./ColorPane\"\r\n],function(langx,$,colors,ColorBox,ColorPane){\r\n   var pickers = [],\r\n    replaceInput = [\r\n        \"<div class='sp-replacer'>\",\r\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\r\n            \"<div class='sp-dd'>&#9660;</div>\",\r\n        \"</div>\"\r\n    ].join(''),\r\n    \r\n    markup = (function () {\r\n        return [\r\n            \"<div class='sp-container sp-hidden'>\",\r\n                \"<div class='sp-palette-container'>\",\r\n                    \"<div class='sp-palette sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-palette-button-container sp-cf'>\",\r\n                        \"<button type='button' class='sp-palette-toggle'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n                \"<div class='sp-picker-container'>\",\r\n                    \"<div class='sp-top sp-cf'>\",\r\n                        \"<div class='sp-fill'></div>\",\r\n                        \"<div class='sp-top-inner'>\",\r\n                            \"<div class='sp-color'>\",\r\n                                \"<div class='sp-sat'>\",\r\n                                    \"<div class='sp-val'>\",\r\n                                        \"<div class='sp-dragger'></div>\",\r\n                                    \"</div>\",\r\n                                \"</div>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-clear sp-clear-display'>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-hue'>\",\r\n                                \"<div class='sp-slider'></div>\",\r\n                            \"</div>\",\r\n                        \"</div>\",\r\n                        \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-input-container sp-cf'>\",\r\n                        \"<input class='sp-input' type='text' spellcheck='false'  />\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-initial sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-button-container sp-cf'>\",\r\n                        \"<a class='sp-cancel' href='#'></a>\",\r\n                        \"<button type='button' class='sp-choose'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n            \"</div>\"\r\n        ].join(\"\");\r\n    })();\r\n\r\n\r\n\tfunction colorer(elmInput,options) {\r\n\t\toptions = langx.mixin({\r\n            // Options\r\n            color: false,\r\n            flat: false,\r\n            appendTo: \"body\",\r\n            maxSelectionSize: 7,\r\n            preferredFormat: false,\r\n            containerClassName: \"\",\r\n            replacerClassName: \"\",\r\n            theme: \"sp-light\",\r\n\r\n            offset: null\r\n\t\t},options);\r\n\r\n\t\tvar \r\n\t\t\ttheme = options.theme,\r\n\t\t\tflat = options.flat,\r\n\t\t\tappendTo = options.appendTo,\r\n\t\t\t$el = $(elmInput),\r\n\t\t\t$pane = $(markup,elmInput.ownerDocument).addClass(theme),\r\n\t        isInput = $el.is(\"input\"),\r\n\t        isInputTypeColor = isInput && $el.attr(\"type\") === \"color\",\r\n\t        shouldReplace = this._shouldReplace =  isInput && !flat,\r\n\t        $replacer =  (shouldReplace) ? $(replaceInput).addClass(theme)\r\n\t                                                      .addClass(options.className)\r\n\t                                                      .addClass(options.replacerClassName) \r\n\t                                     : $([]),\r\n\t        $offsetElement =  (shouldReplace) ? $replacer : $el;\r\n\r\n\r\n        delete options.flat;\r\n        delete options.appendTo;\r\n\r\n        options.color = options.color || (isInput && $el.val());\r\n\r\n        if (shouldReplace) {\r\n            $el.after($replacer).hide();\r\n        }\r\n\r\n\r\n        $pane.toggleClass(\"sp-flat\", flat)\r\n             .addClass(options.containerClassName);\r\n\r\n        if (flat) {\r\n            $el.after($pane).hide();\r\n            var pane = new ColorPane($pane[0],options);\r\n            pane.show();\r\n            return pane;\r\n        } else {\r\n            var $appendTo = appendTo === \"parent\" ? $el.parent() : $(appendTo);\r\n            if ($appendTo.length !== 1) {\r\n                $appendTo = $(\"body\");\r\n            }\r\n\r\n            $appendTo.append($pane);\r\n            options.pane = $pane;\r\n            return new ColorBox($replacer[0],options);\r\n        }\r\n\t}\r\n\r\n\treturn colors.colorer = colorer;\r\n});"]}